<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É | AssistentNUOS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .online { background: #4CAF50; }
        .offline { background: #F44336; }
        .test-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
        .test-button:hover {
            background: #f0f0f0;
        }
        .results {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { color: #4CAF50; }
        .error { color: #F44336; }
        .info { color: #2196F3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É AssistentNUOS</h1>
        
        <div id="connectionStatus" class="status">
            –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –∑'—î–¥–Ω–∞–Ω–Ω—è...
        </div>
        
        <div>
            <h3>–¢–µ—Å—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è:</h3>
            <button class="test-button" onclick="testMainPage()">–¢–µ—Å—Ç –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏</button>
            <button class="test-button" onclick="testSchedulePage()">–¢–µ—Å—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–æ–∑–∫–ª–∞–¥—É</button>
            <button class="test-button" onclick="testImages()">–¢–µ—Å—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å</button>
            <button class="test-button" onclick="testCSS()">–¢–µ—Å—Ç CSS —Ñ–∞–π–ª—ñ–≤</button>
            <button class="test-button" onclick="testJS()">–¢–µ—Å—Ç JS —Ñ–∞–π–ª—ñ–≤</button>
            <button class="test-button" onclick="testManifest()">–¢–µ—Å—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—É</button>
            <button class="test-button" onclick="clearCache()">–û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à</button>
        </div>
        
        <div>
            <h3>–°–∏–º—É–ª—è—Ü—ñ—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É:</h3>
            <button class="test-button" onclick="simulateOffline()">–°–∏–º—É–ª—é–≤–∞—Ç–∏ –æ—Ñ–ª–∞–π–Ω</button>
            <button class="test-button" onclick="simulateOnline()">–°–∏–º—É–ª—é–≤–∞—Ç–∏ –æ–Ω–ª–∞–π–Ω</button>
            <button class="test-button" onclick="testOfflineNotifications()">–¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—å –æ—Ñ–ª–∞–π–Ω</button>
        </div>
        
        <div class="results" id="testResults">
            <p class="info">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —Ç—É—Ç...</p>
        </div>
        
        <div>
            <h3>–®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:</h3>
            <a href="./index.html" class="test-button" style="text-decoration: none; display: inline-block;">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="./pages/schedule.html" class="test-button" style="text-decoration: none; display: inline-block;">–†–æ–∑–∫–ª–∞–¥</a>
            <a href="./pages/offline.html" class="test-button" style="text-decoration: none; display: inline-block;">–û—Ñ–ª–∞–π–Ω —Å—Ç–æ—Ä—ñ–Ω–∫–∞</a>
        </div>
    </div>

    <script>
        // –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
        function log(message, type = 'info') {
            const results = document.getElementById('testResults');
            const time = new Date().toLocaleTimeString();
            results.innerHTML += `<div class="${type}">[${time}] ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∑'—î–¥–Ω–∞–Ω–Ω—è
        function updateConnectionStatus() {
            const status = document.getElementById('connectionStatus');
            if (navigator.onLine) {
                status.className = 'status online';
                status.innerHTML = 'üü¢ <strong>–û–Ω–ª–∞–π–Ω</strong> - –ó\'—î–¥–Ω–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–µ —Ç–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–µ';
            } else {
                status.className = 'status offline';
                status.innerHTML = 'üî¥ <strong>–û—Ñ–ª–∞–π–Ω</strong> - –ü—Ä–∞—Ü—é—î–º–æ –≤ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ';
            }
        }

        // –¢–µ—Å—Ç –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        async function testMainPage() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏...', 'info');
            try {
                const response = await fetch('./index.html');
                if (response.ok) {
                    log('‚úÖ –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞', 'success');
                } else {
                    log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
            }
        }

        // –¢–µ—Å—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–æ–∑–∫–ª–∞–¥—É
        async function testSchedulePage() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–æ–∑–∫–ª–∞–¥—É...', 'info');
            try {
                const response = await fetch('./pages/schedule.html');
                if (response.ok) {
                    log('‚úÖ –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–æ–∑–∫–ª–∞–¥—É –¥–æ—Å—Ç—É–ø–Ω–∞', 'success');
                } else {
                    log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–æ–∑–∫–ª–∞–¥—É: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
            }
        }

        // –¢–µ—Å—Ç –∑–æ–±—Ä–∞–∂–µ–Ω—å
        async function testImages() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å...', 'info');
            const images = [
                './assets/images/logo.svg',
                './assets/images/pwa-icon-large.svg',
                './assets/images/icons/icon-192x192.png'
            ];
            
            for (const img of images) {
                try {
                    const response = await fetch(img);
                    if (response.ok) {
                        log(`‚úÖ –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø–Ω–µ: ${img}`, 'success');
                    } else {
                        log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: ${img}`, 'error');
                    }
                } catch (error) {
                    log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞ –¥–ª—è ${img}: ${error.message}`, 'error');
                }
            }
        }

        // –¢–µ—Å—Ç CSS —Ñ–∞–π–ª—ñ–≤
        async function testCSS() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è CSS —Ñ–∞–π–ª—ñ–≤...', 'info');
            const cssFiles = [
                './assets/css/main.css',
                './assets/css/components.css',
                './assets/css/index.css'
            ];
            
            for (const css of cssFiles) {
                try {
                    const response = await fetch(css);
                    if (response.ok) {
                        log(`‚úÖ CSS —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–Ω–∏–π: ${css}`, 'success');
                    } else {
                        log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSS: ${css}`, 'error');
                    }
                } catch (error) {
                    log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞ –¥–ª—è ${css}: ${error.message}`, 'error');
                }
            }
        }

        // –¢–µ—Å—Ç JS —Ñ–∞–π–ª—ñ–≤
        async function testJS() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è JS —Ñ–∞–π–ª—ñ–≤...', 'info');
            const jsFiles = [
                './assets/js/app.js',
                './assets/js/pwa.js'
            ];
            
            for (const js of jsFiles) {
                try {
                    const response = await fetch(js);
                    if (response.ok) {
                        log(`‚úÖ JS —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–Ω–∏–π: ${js}`, 'success');
                    } else {
                        log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è JS: ${js}`, 'error');
                    }
                } catch (error) {
                    log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞ –¥–ª—è ${js}: ${error.message}`, 'error');
                }
            }
        }

        // –¢–µ—Å—Ç –º–∞–Ω–∏—Ñ–µ—Å—Ç—É
        async function testManifest() {
            log('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–∞–Ω–∏—Ñ–µ—Å—Ç—É...', 'info');
            try {
                const response = await fetch('./manifest.json');
                if (response.ok) {
                    const manifest = await response.json();
                    log('‚úÖ –ú–∞–Ω–∏—Ñ–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–∏–π', 'success');
                    log(`üì± –ù–∞–∑–≤–∞ –¥–æ–¥–∞—Ç–∫–∞: ${manifest.name}`, 'info');
                } else {
                    log(`‚ùå –ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞–Ω–∏—Ñ–µ—Å—Ç—É: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå –ú–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç—É: ${error.message}`, 'error');
            }
        }

        // –û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
        async function clearCache() {
            if ('caches' in window) {
                log('–û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É...', 'info');
                const cacheNames = await caches.keys();
                const deletePromises = cacheNames.map(name => caches.delete(name));
                await Promise.all(deletePromises);
                log(`‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ ${cacheNames.length} –∫–µ—à—ñ–≤`, 'success');
            } else {
                log('‚ùå Cache API –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è', 'error');
            }
        }

        // –°–∏–º—É–ª—è—Ü—ñ—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É
        function simulateOffline() {
            log('üîå –°–∏–º—É–ª—è—Ü—ñ—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É...', 'info');
            // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–∫–∞–∑—É—î —â–æ —Ä–æ–±–∏—Ç—å service worker
            log('üí° Service Worker –±—É–¥–µ –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∑–∞–∫–µ—à–æ–≤–∞–Ω—ñ –≤–µ—Ä—Å—ñ—ó', 'info');
            log('üí° –í—ñ–¥–∫–ª—é—á—ñ—Ç—å Wi-Fi/–º–æ–±—ñ–ª—å–Ω—ñ –¥–∞–Ω—ñ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è', 'info');
        }

        // –°–∏–º—É–ª—è—Ü—ñ—è –æ–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º—É
        function simulateOnline() {
            log('üåê –°–∏–º—É–ª—è—Ü—ñ—è –æ–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º—É...', 'info');
            log('üí° Service Worker –±—É–¥–µ –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ –º–µ—Ä–µ–∂—ñ —Ç–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∫–µ—à', 'info');
        }

        // –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—å –æ—Ñ–ª–∞–π–Ω
        function testOfflineNotifications() {
            log('üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ—Ñ–ª–∞–π–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω—å...', 'info');
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ–¥—ñ—é offline
            const offlineEvent = new Event('offline');
            window.dispatchEvent(offlineEvent);
            
            setTimeout(() => {
                // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ–¥—ñ—é online
                const onlineEvent = new Event('online');
                window.dispatchEvent(onlineEvent);
                log('‚úÖ –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—å –∑–∞–≤–µ—Ä—à–µ–Ω–æ', 'success');
            }, 3000);
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        window.addEventListener('load', () => {
            updateConnectionStatus();
            log('üöÄ –¢–µ—Å—Ç –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ', 'info');
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Service Worker
            if ('serviceWorker' in navigator) {
                log('‚úÖ Service Worker –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è', 'success');
                navigator.serviceWorker.getRegistration().then(reg => {
                    if (reg) {
                        log('‚úÖ Service Worker –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ', 'success');
                    } else {
                        log('‚ö†Ô∏è Service Worker –Ω–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ', 'error');
                    }
                });
            } else {
                log('‚ùå Service Worker –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º', 'error');
            }
        });

        // –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –∑'—î–¥–Ω–∞–Ω–Ω—è
        window.addEventListener('online', () => {
            updateConnectionStatus();
            log('üü¢ –ó\'—î–¥–Ω–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ - –ø–æ–≤–µ—Ä–Ω—É–ª–∏—Å—è –≤ –æ–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º', 'success');
        });

        window.addEventListener('offline', () => {
            updateConnectionStatus();
            log('üî¥ –ó\'—î–¥–Ω–∞–Ω–Ω—è –≤—Ç—Ä–∞—á–µ–Ω–æ - –ø–µ—Ä–µ—Ö—ñ–¥ –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º', 'error');
        });
    </script>
</body>
</html>
